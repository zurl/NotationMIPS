<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <h1>VERY GREAT MIPS ASSEMBLY GENERATOR</h1>
    <div style="display: flex">
        <textarea id="area" style="height:500px;width:300px;font-family:monospace" ></textarea>
        <div>
             <pre id="result"style="font-family:monospace" ></pre>
            <div id="error"></div>
        </div>
           
    </div>
   
    <button onclick="generate()"> generate </button>
    <script src="bundle.js"></script>
    <script>
        function generate(){
            var script = document.getElementById('area').value;
            let isError = false;
            var ediv = document.getElementById('error');
            ediv.innerHTML="";
            const data = window.utils.preprocess(script, (i, text)=>{ediv.innerHTML += `ERROR at ${i}: ${text}` + "\n";isError=true;});
            let result = window.utils.optimize(data);
            console.log(data.join('\n'));
            //console.log('====');
            var ret = document.getElementById("result");
            if(!isError){
               ret.innerText = result.join('\n');
            }else{
                ret.innerText = "error";
            }
        }
    </script>
  </body>
</html>